<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Carrie Wang">
    <meta name="description" content="Credit card">
    <title>GreenWater</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
    <script src="js/pies.js" language="JavaScript"></script>
    <style>
        .liquidFillGaugeText { font-family: Helvetica; font-weight: bold; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <!-- <li><a href="about.html">Receipts</a></li> -->
          </ul>
        </div>
      </div>
    </nav>
    <div id="index-wrapper">
      <div id="index-banner" class="jumbotron">
        <div class="container">
          <div id="html-bars" class="col-lg-2">
            <h4 id="income">Income: $3000</h4>
            <h4 id="Spent">Spent: $1300</h4>
            <style>
            body {
              font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            }

            button {
              position: absolute;
              right: -250px;
              top: 10px;
            }

            .bullet { font: 10px sans-serif; position:absolute; margin-top:-1100px; margin-left:-30px;}
            .bullet .marker { stroke: #000; stroke-width: 2px; }
            .bullet .tick line { stroke: #666; stroke-width: .5px; }
            .bullet .range.s0 { fill: #eee; }
            .bullet .range.s1 { fill: #ddd; }
            .bullet .range.s2 { fill: #ccc; }
            .bullet .meausre.s0 { fill: darkgreen;}
            .bullet .measure.s1 { fill: palegreen; }
            .bullet .measure.s2 { fill: seagreen; }
            .bullet .measure.s3 { fill: chartreuse;}
            .bullet .title { font-size: 14px; font-weight: bold; }
            .bullet .subtitle { fill: #999; }

            </style>
            <button><a href="file:///Users/carrie/Documents/PennApps_Fall2015/PennApps_Fall_OCR/about.html">Show All Receipts</a></button>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
            <script src="js/bullet.js"></script>
             <script>

            var margin = {top: 5, right: 40, bottom: 20, left: 120},
                width = 730 - margin.right,
                height = 50 - margin.bottom;

            var chart = d3.bullet()
                .width(width)
                .height(height);

            var jsonobj = [{"title":"Spending","subtitle":"US$","ranges":[1300, 3000],"measures":[500, 1200, 1300, 3000],"markers":[1500, 2500]}];


              var svg = d3.select("body").selectAll("svg")
                  .data(jsonobj)
                .enter().append("svg")
                  .attr("class", "bullet")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
                  .call(chart);

              var title = svg.append("g")
                  .style("text-anchor", "end")
                  .attr("transform", "translate(-6," + height / 2 + ")");

              title.append("text")
                  .attr("class", "title")
                  .text(function(d) { return d.title; });

              title.append("text")
                  .attr("class", "subtitle")
                  .attr("dy", "1em")
                  .text(function(d) { return d.subtitle; });

              //d3.selectAll("button").on("click", function() {
                 //svg.datum(randomize).call(chart.duration(1000)); // TODO automatic transition

               //});
            

            // function randomize(d) {
            //   if (!d.randomizer) d.randomizer = randomizer(d);
            //   d.ranges = d.ranges.map(d.randomizer);
            //   d.markers = d.markers.map(d.randomizer);
            //   d.measures = d.measures.map(d.randomizer);
            //   return d;
            // }

            // function randomizer(d) {
            //   var k = d3.max(d.ranges) * .2;
            //   return function(d) {
            //     return Math.max(0, d + k * (Math.random() - .5));
            //   };
            // }

            // setInterval(svg.datum(randomize).call(chart.duration(1000)), 5000);

             </script>
             <TABLE BORDER=3 CELLSPACING=5 CELLPADDING=5 class="spending-table">
              <TR>
              <TD COLSPAN="5" ALIGN=center><B>September 2015</B></TD> 
              </TR>
              <TR>
              </TR>
              <TR> 
              <TD ALIGN=center>Date</TD>
              <TD ALIGN=center>Location</TD>
              <TD ALIGN=center>Money Spent</TD>
              <TD ALIGN=center>Cash or Credit</TD>
              <TD ALIGN=center>Receipts</TD>
              </TR>
              <TR> 
              <TD ALIGN=center>3</TD>
              <TD ALIGN=center>4</TD>
              <TD ALIGN=center>1</TD>
              <TD ALIGN=center>2</TD>
              <TD ALIGN=center><a href="" onclick='displayImage("img/receipt_one.jpg"); return false;' id="imageOne">Show Receipt</a></TD>
              </TR>
              <TR> 
              <TD ALIGN=center>6</TD>
              <TD ALIGN=center>7</TD>
              <TD ALIGN=center>8</TD>
              <TD ALIGN=center>9</TD>
              <TD ALIGN=center><a href="" onclick='displayImage("img/receipt_two.jpg"); return false;' id="imageTwo">Show Receipt</a></TD>
              </TR>
              <TR> 
              <TD ALIGN=center>13</TD>
              <TD ALIGN=center>14</TD>
              <TD ALIGN=center>15</TD>
              <TD ALIGN=center>16</TD>
              <TD ALIGN=center><a href="" id="imageThree">Show Receipt</a></TD>
              </TR>
              <TR> 
              <TD ALIGN=center>20</TD>
              <TD ALIGN=center>21</TD>
              <TD ALIGN=center>22</TD>
              <TD ALIGN=center>23</TD>
              <TD ALIGN=center><a href="" onclick="receiptFour()" id="imageFour">Show Receipt</a></TD>
              </TR>
              <TR> 
              <TD ALIGN=center>27</TD>
              <TD ALIGN=center>28</TD>
              <TD ALIGN=center>29</TD>
              <TD ALIGN=center>30</TD>
              <TD ALIGN=center><a href="" onclick="receiptFive()" id="imageFive">Show Receipt</a></TD>
              </TR>
              <TR> 
              <TD ALIGN=center></TD>
              <TD ALIGN=center></TD>
              <TD ALIGN=center></TD>
              <TD ALIGN=center></TD>
              <TD ALIGN=center></TD>
              </TR>
            </TABLE>
            <img id="image" style="width:100%;"></img><!-- 
            <img id="image" src="img/receipt_two.jpg" alt="receipt" style="width:100%;"></img> -->
          </div>
          <div id="html-pies" class="col-lg-2">
            <svg id="fillgauge1" width="97%" height="250"></svg>
            <p>Income Left</p>
            <svg id="fillgauge2" width="97%" height="200"></svg>
            <p>Card 1 Limit Left</p>
            <svg id="fillgauge3" width="97%" height="200"></svg>
            <p>Card 2 Limit Left</p>
            <script language="JavaScript">
              var gauge1 = loadLiquidFillGauge("fillgauge1", 55);
              var config1 = liquidFillGaugeDefaultSettings();
              config1.circleColor = "#FF7777";
              config1.textColor = "#FF4444";
              config1.waveTextColor = "#FFAAAA";
              config1.waveColor = "#FFDDDD";
              config1.circleThickness = 0.1;
              config1.textVertPosition = 0.2;
              config1.waveAnimateTime = 1000;
              var gauge2= loadLiquidFillGauge("fillgauge2", 28, config1);
              var config2 = liquidFillGaugeDefaultSettings();
              config2.circleColor = "#D4AB6A";
              config2.textColor = "#553300";
              config2.waveTextColor = "#805615";
              config2.waveColor = "#AA7D39";
              config2.circleThickness = 0.1;
              config2.circleFillGap = 0.2;
              config2.textVertPosition = 0.8;
              config2.waveAnimateTime = 2000;
              config2.waveHeight = 0.3;
              config2.waveCount = 1;
              var gauge3 = loadLiquidFillGauge("fillgauge3", 60.1, config2);
              var config3 = liquidFillGaugeDefaultSettings();
              config3.textVertPosition = 0.8;
              config3.waveAnimateTime = 5000;
              config3.waveHeight = 0.15;
              config3.waveAnimate = false;
              config3.waveOffset = 0.25;
              config3.valueCountUp = false;
              config3.displayPercent = false;
              
              //THIS IS WHERE YOU GET THE UPDATE NUMBERS
              function NewValue(){
                  if(Math.random() > .5){
                     return Math.round(Math.random()*100);
                  } else {
                     return (Math.random()*100).toFixed(1);
                  }
              }
              function NewValue2(){
                  if(Math.random() > .5){
                     return Math.round(Math.random()*100);
                  } else {
                     return (Math.random()*100).toFixed(1);
                  }
              }
              function NewValue3(){
                  if(Math.random() > .5){
                     return Math.round(Math.random()*100);
                  } else {
                     return (Math.random()*100).toFixed(1);
                  }
              }
              function updateDisplay() {
                  gauge1.update(NewValue());
                  gauge2.update(NewValue2());
                  gauge3.update(NewValue3());
              }
              setInterval(updateDisplay, 5000);
//setTimeout(updateDisplay, 5000);
              // ajaxCall(function(response) {

              // });
            </script>
          </div>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/show_image.js"></script>
  </body>
</html>